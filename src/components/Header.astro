---
import { siteConfig } from "../config";
const c = siteConfig.colors;
---

<!-- Floating Pill Nav -->
<header
  id="floating-nav"
  class="floating-header fixed top-4 left-1/2 -translate-x-1/2 z-50 hidden"
>
  <nav
    class="flex items-center gap-1 px-2 py-2 rounded-full shadow-xl backdrop-blur-md"
    style={`background-color: ${c.bg}e6; border: 1px solid ${c.cardBorder};`}
  >
    <a href="#hero" class="nav-link px-3 py-1.5 rounded-full text-xs font-medium" style={`color: ${c.text}`}>
      Inicio
    </a>
    <a href="#practice" class="nav-link px-3 py-1.5 rounded-full text-xs font-medium" style={`color: ${c.text}`}>
      &Aacute;reas
    </a>
    <a href="#about" class="nav-link px-3 py-1.5 rounded-full text-xs font-medium" style={`color: ${c.text}`}>
      Sobre M&iacute;
    </a>
    <a href="#testimonials" class="nav-link px-3 py-1.5 rounded-full text-xs font-medium" style={`color: ${c.text}`}>
      Depoimentos
    </a>
    <a href="#faq" class="nav-link px-3 py-1.5 rounded-full text-xs font-medium" style={`color: ${c.text}`}>
      FAQ
    </a>
  </nav>
</header>

<style>
  html { scroll-behavior: smooth; }
  .nav-link { transition: background-color 0.2s ease, color 0.2s ease; }
  .nav-link:hover { background-color: rgba(30, 196, 168, 0.15); }
  .nav-link.active { background-color: rgba(30, 196, 168, 0.2); }
</style>

<script>
  const nav = document.getElementById('floating-nav');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 400) {
      nav?.classList.remove('hidden');
    } else {
      nav?.classList.add('hidden');
    }
  });

  // Active section highlighting
  const sections = document.querySelectorAll('section[id]');
  const navLinks = nav?.querySelectorAll('a');

  const observerNav = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        navLinks?.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${entry.target.id}`) {
            link.classList.add('active');
          }
        });
      }
    });
  }, { threshold: 0.3 });

  sections.forEach(section => observerNav.observe(section));
</script>
